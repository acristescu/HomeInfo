package io.zenandroid.homeinfo.service;

import android.support.annotation.VisibleForTesting;

import com.google.gson.Gson;

import java.util.concurrent.TimeUnit;

import javax.inject.Inject;

import io.reactivex.Single;
import io.reactivex.android.schedulers.AndroidSchedulers;
import io.reactivex.schedulers.Schedulers;
import io.zenandroid.homeinfo.model.darksky.Request;
import io.zenandroid.homeinfo.model.darksky.WeatherResponse;
import io.zenandroid.homeinfo.util.EspressoIdlingResource;

/**
 * Created by acristescu on 30/06/2017.
 */

public class MockDarkSkyService implements DarkSkyService {

	private WeatherResponse response;
	private int delay = 0;

	@Inject public MockDarkSkyService() {
		response = new Gson().fromJson(
				"{\"latitude\":51.5074,\"longitude\":0.1278,\"timezone\":\"Europe/London\",\"offset\":1,\"currently\":{\"time\":1500921137,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"nearestStormDistance\":0,\"precipIntensity\":0.0508,\"precipIntensityError\":0,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":19.54,\"apparentTemperature\":19.54,\"dewPoint\":11.72,\"humidity\":0.61,\"windSpeed\":5.6,\"windGust\":9.67,\"windBearing\":341,\"visibility\":15,\"cloudCover\":0.92,\"pressure\":1015.63,\"ozone\":345.42,\"uvIndex\":0},\"minutely\":{\"summary\":\"Mostly cloudy for the hour.\",\"icon\":\"partly-cloudy-day\",\"data\":[{\"time\":1500921120,\"precipIntensity\":0.0508,\"precipIntensityError\":0,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921180,\"precipIntensity\":0.0508,\"precipIntensityError\":0,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921240,\"precipIntensity\":0.0508,\"precipIntensityError\":0,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921300,\"precipIntensity\":0.0508,\"precipIntensityError\":0,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921360,\"precipIntensity\":0.0508,\"precipIntensityError\":0,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921420,\"precipIntensity\":0.0508,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921480,\"precipIntensity\":0.0508,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921540,\"precipIntensity\":0.0508,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921600,\"precipIntensity\":0.0508,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921660,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.03,\"precipType\":\"rain\"},{\"time\":1500921720,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921780,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921840,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921900,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500921960,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500922020,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500922080,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500922140,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922200,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922260,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922320,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922380,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922440,\"precipIntensity\":0,\"precipProbability\":0},{\"time\":1500922500,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922560,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922620,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922680,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922740,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.01,\"precipType\":\"rain\"},{\"time\":1500922800,\"precipIntensity\":0.0762,\"precipIntensityError\":0,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500922860,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500922920,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.02,\"precipType\":\"rain\"},{\"time\":1500922980,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.03,\"precipType\":\"rain\"},{\"time\":1500923040,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.03,\"precipType\":\"rain\"},{\"time\":1500923100,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.03,\"precipType\":\"rain\"},{\"time\":1500923160,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.04,\"precipType\":\"rain\"},{\"time\":1500923220,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.04,\"precipType\":\"rain\"},{\"time\":1500923280,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.04,\"precipType\":\"rain\"},{\"time\":1500923340,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.05,\"precipType\":\"rain\"},{\"time\":1500923400,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.05,\"precipType\":\"rain\"},{\"time\":1500923460,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.06,\"precipType\":\"rain\"},{\"time\":1500923520,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.06,\"precipType\":\"rain\"},{\"time\":1500923580,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0762,\"precipProbability\":0.06,\"precipType\":\"rain\"},{\"time\":1500923640,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0508,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500923700,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0254,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500923760,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0508,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500923820,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0508,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500923880,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0508,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500923940,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0508,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500924000,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0762,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500924060,\"precipIntensity\":0.0762,\"precipIntensityError\":0.1016,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500924120,\"precipIntensity\":0.0762,\"precipIntensityError\":0.0762,\"precipProbability\":0.07,\"precipType\":\"rain\"},{\"time\":1500924180,\"precipIntensity\":0.1016,\"precipIntensityError\":0.1016,\"precipProbability\":0.1,\"precipType\":\"rain\"},{\"time\":1500924240,\"precipIntensity\":0.1016,\"precipIntensityError\":0.127,\"precipProbability\":0.1,\"precipType\":\"rain\"},{\"time\":1500924300,\"precipIntensity\":0.1016,\"precipIntensityError\":0.127,\"precipProbability\":0.1,\"precipType\":\"rain\"},{\"time\":1500924360,\"precipIntensity\":0.1016,\"precipIntensityError\":0.1524,\"precipProbability\":0.1,\"precipType\":\"rain\"},{\"time\":1500924420,\"precipIntensity\":0.1016,\"precipIntensityError\":0.1778,\"precipProbability\":0.1,\"precipType\":\"rain\"},{\"time\":1500924480,\"precipIntensity\":0.1016,\"precipIntensityError\":0.1524,\"precipProbability\":0.09,\"precipType\":\"rain\"},{\"time\":1500924540,\"precipIntensity\":0.1016,\"precipIntensityError\":0.1778,\"precipProbability\":0.1,\"precipType\":\"rain\"},{\"time\":1500924600,\"precipIntensity\":0.1016,\"precipIntensityError\":0.2032,\"precipProbability\":0.1,\"precipType\":\"rain\"},{\"time\":1500924660,\"precipIntensity\":0.127,\"precipIntensityError\":0.2286,\"precipProbability\":0.12,\"precipType\":\"rain\"},{\"time\":1500924720,\"precipIntensity\":0.127,\"precipIntensityError\":0.254,\"precipProbability\":0.13,\"precipType\":\"rain\"}]},\"hourly\":{\"summary\":\"Mostly cloudy throughout the day.\",\"icon\":\"partly-cloudy-day\",\"data\":[{\"time\":1500919200,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":19.98,\"apparentTemperature\":19.98,\"dewPoint\":11.89,\"humidity\":0.6,\"windSpeed\":5.74,\"windGust\":9.63,\"windBearing\":340,\"visibility\":15,\"cloudCover\":0.93,\"pressure\":1015.5,\"ozone\":344.94,\"uvIndex\":0},{\"time\":1500922800,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0711,\"precipProbability\":0.01,\"precipType\":\"rain\",\"temperature\":19.54,\"apparentTemperature\":19.54,\"dewPoint\":11.93,\"humidity\":0.61,\"windSpeed\":5.49,\"windGust\":9.69,\"windBearing\":342,\"visibility\":15,\"cloudCover\":0.9,\"pressure\":1015.75,\"ozone\":345.84,\"uvIndex\":0},{\"time\":1500926400,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":18.66,\"apparentTemperature\":18.66,\"dewPoint\":11.99,\"humidity\":0.65,\"windSpeed\":5.19,\"windGust\":9.8,\"windBearing\":344,\"visibility\":15,\"cloudCover\":0.86,\"pressure\":1016.07,\"ozone\":346.38,\"uvIndex\":0},{\"time\":1500930000,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":17.49,\"apparentTemperature\":17.49,\"dewPoint\":12.03,\"humidity\":0.7,\"windSpeed\":4.9,\"windGust\":9.83,\"windBearing\":344,\"visibility\":15,\"cloudCover\":0.83,\"pressure\":1016.33,\"ozone\":346.47,\"uvIndex\":0},{\"time\":1500933600,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":16.79,\"apparentTemperature\":16.79,\"dewPoint\":12.07,\"humidity\":0.74,\"windSpeed\":4.6,\"windGust\":9.73,\"windBearing\":344,\"visibility\":15,\"cloudCover\":0.81,\"pressure\":1016.48,\"ozone\":345.97,\"uvIndex\":0},{\"time\":1500937200,\"summary\":\"Overcast\",\"icon\":\"cloudy\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":16.25,\"apparentTemperature\":16.25,\"dewPoint\":12.08,\"humidity\":0.76,\"windSpeed\":4.37,\"windGust\":9.71,\"windBearing\":343,\"visibility\":15,\"cloudCover\":0.95,\"pressure\":1016.64,\"ozone\":340.87,\"uvIndex\":0},{\"time\":1500940800,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":15.97,\"apparentTemperature\":15.97,\"dewPoint\":12.02,\"humidity\":0.77,\"windSpeed\":4.08,\"windGust\":9.33,\"windBearing\":342,\"visibility\":15,\"cloudCover\":0.92,\"pressure\":1016.67,\"ozone\":340.73,\"uvIndex\":0},{\"time\":1500944400,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":15.64,\"apparentTemperature\":15.64,\"dewPoint\":11.87,\"humidity\":0.78,\"windSpeed\":3.85,\"windGust\":8.78,\"windBearing\":337,\"visibility\":15,\"cloudCover\":0.78,\"pressure\":1016.62,\"ozone\":341.19,\"uvIndex\":0},{\"time\":1500948000,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":15.38,\"apparentTemperature\":15.38,\"dewPoint\":11.65,\"humidity\":0.78,\"windSpeed\":3.67,\"windGust\":8.15,\"windBearing\":331,\"visibility\":15,\"cloudCover\":0.58,\"pressure\":1016.51,\"ozone\":341.89,\"uvIndex\":0},{\"time\":1500951600,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":15.06,\"apparentTemperature\":15.06,\"dewPoint\":11.43,\"humidity\":0.79,\"windSpeed\":3.53,\"windGust\":7.7,\"windBearing\":327,\"visibility\":15,\"cloudCover\":0.43,\"pressure\":1016.41,\"ozone\":342.2,\"uvIndex\":0},{\"time\":1500955200,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":14.61,\"apparentTemperature\":14.61,\"dewPoint\":11.19,\"humidity\":0.8,\"windSpeed\":3.49,\"windGust\":7.68,\"windBearing\":325,\"visibility\":15,\"cloudCover\":0.43,\"pressure\":1016.29,\"ozone\":341.51,\"uvIndex\":0},{\"time\":1500958800,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":14.02,\"apparentTemperature\":14.02,\"dewPoint\":10.95,\"humidity\":0.82,\"windSpeed\":3.5,\"windGust\":7.87,\"windBearing\":325,\"visibility\":15,\"cloudCover\":0.48,\"pressure\":1016.19,\"ozone\":340.42,\"uvIndex\":0},{\"time\":1500962400,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":14.07,\"apparentTemperature\":14.07,\"dewPoint\":10.9,\"humidity\":0.81,\"windSpeed\":3.51,\"windGust\":7.78,\"windBearing\":327,\"visibility\":15,\"cloudCover\":0.5,\"pressure\":1016.1,\"ozone\":339.53,\"uvIndex\":0},{\"time\":1500966000,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":14.99,\"apparentTemperature\":14.99,\"dewPoint\":11.18,\"humidity\":0.78,\"windSpeed\":3.49,\"windGust\":7.09,\"windBearing\":328,\"visibility\":15.69,\"cloudCover\":0.43,\"pressure\":1016.07,\"ozone\":339.08,\"uvIndex\":1},{\"time\":1500969600,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":16.36,\"apparentTemperature\":16.36,\"dewPoint\":11.62,\"humidity\":0.74,\"windSpeed\":3.46,\"windGust\":6.13,\"windBearing\":330,\"visibility\":16.09,\"cloudCover\":0.33,\"pressure\":1016.07,\"ozone\":338.88,\"uvIndex\":1},{\"time\":1500973200,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":17.58,\"apparentTemperature\":17.58,\"dewPoint\":11.97,\"humidity\":0.7,\"windSpeed\":3.45,\"windGust\":5.38,\"windBearing\":331,\"visibility\":16.09,\"cloudCover\":0.27,\"pressure\":1015.98,\"ozone\":338.89,\"uvIndex\":2},{\"time\":1500976800,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":18.62,\"apparentTemperature\":18.62,\"dewPoint\":12.16,\"humidity\":0.66,\"windSpeed\":3.48,\"windGust\":5.03,\"windBearing\":331,\"visibility\":16.09,\"cloudCover\":0.29,\"pressure\":1015.81,\"ozone\":339.24,\"uvIndex\":4},{\"time\":1500980400,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":19.57,\"apparentTemperature\":19.57,\"dewPoint\":12.27,\"humidity\":0.63,\"windSpeed\":3.54,\"windGust\":4.88,\"windBearing\":330,\"visibility\":16.09,\"cloudCover\":0.35,\"pressure\":1015.56,\"ozone\":339.9,\"uvIndex\":5},{\"time\":1500984000,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":20.63,\"apparentTemperature\":20.63,\"dewPoint\":12.31,\"humidity\":0.59,\"windSpeed\":3.57,\"windGust\":4.77,\"windBearing\":329,\"visibility\":16.09,\"cloudCover\":0.42,\"pressure\":1015.28,\"ozone\":340.35,\"uvIndex\":5},{\"time\":1500987600,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":21.52,\"apparentTemperature\":21.52,\"dewPoint\":12.24,\"humidity\":0.56,\"windSpeed\":3.56,\"windGust\":4.69,\"windBearing\":330,\"visibility\":16.09,\"cloudCover\":0.52,\"pressure\":1014.96,\"ozone\":340.55,\"uvIndex\":4},{\"time\":1500991200,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":22.69,\"apparentTemperature\":22.69,\"dewPoint\":12.11,\"humidity\":0.51,\"windSpeed\":3.51,\"windGust\":4.65,\"windBearing\":332,\"visibility\":16.09,\"cloudCover\":0.64,\"pressure\":1014.62,\"ozone\":340.6,\"uvIndex\":3},{\"time\":1500994800,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":23.58,\"apparentTemperature\":23.58,\"dewPoint\":11.97,\"humidity\":0.48,\"windSpeed\":3.37,\"windGust\":4.5,\"windBearing\":335,\"visibility\":16.09,\"cloudCover\":0.7,\"pressure\":1014.28,\"ozone\":340.7,\"uvIndex\":2},{\"time\":1500998400,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":24.32,\"apparentTemperature\":24.32,\"dewPoint\":11.87,\"humidity\":0.46,\"windSpeed\":3.07,\"windGust\":4.14,\"windBearing\":333,\"visibility\":16.09,\"cloudCover\":0.68,\"pressure\":1013.92,\"ozone\":340.9,\"uvIndex\":1},{\"time\":1501002000,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":24.29,\"apparentTemperature\":24.29,\"dewPoint\":11.77,\"humidity\":0.46,\"windSpeed\":2.67,\"windGust\":3.67,\"windBearing\":334,\"visibility\":16.09,\"cloudCover\":0.6,\"pressure\":1013.56,\"ozone\":341.21,\"uvIndex\":1},{\"time\":1501005600,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":23.5,\"apparentTemperature\":23.5,\"dewPoint\":11.74,\"humidity\":0.48,\"windSpeed\":2.27,\"windGust\":3.27,\"windBearing\":343,\"visibility\":16.09,\"cloudCover\":0.5,\"pressure\":1013.31,\"ozone\":341.41,\"uvIndex\":0},{\"time\":1501009200,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":21.84,\"apparentTemperature\":21.84,\"dewPoint\":11.8,\"humidity\":0.53,\"windSpeed\":1.8,\"windGust\":3.02,\"windBearing\":7,\"visibility\":16.09,\"cloudCover\":0.34,\"pressure\":1013.22,\"ozone\":341.96,\"uvIndex\":0},{\"time\":1501012800,\"summary\":\"Clear\",\"icon\":\"clear-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":20.38,\"apparentTemperature\":20.38,\"dewPoint\":11.94,\"humidity\":0.58,\"windSpeed\":1.28,\"windGust\":2.85,\"windBearing\":40,\"visibility\":16.09,\"cloudCover\":0.14,\"pressure\":1013.26,\"ozone\":342.36,\"uvIndex\":0},{\"time\":1501016400,\"summary\":\"Clear\",\"icon\":\"clear-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":19.08,\"apparentTemperature\":19.08,\"dewPoint\":12.04,\"humidity\":0.64,\"windSpeed\":0.98,\"windGust\":2.71,\"windBearing\":73,\"visibility\":16.09,\"cloudCover\":0,\"pressure\":1013.19,\"ozone\":341.3,\"uvIndex\":0},{\"time\":1501020000,\"summary\":\"Clear\",\"icon\":\"clear-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":18.31,\"apparentTemperature\":18.31,\"dewPoint\":12.1,\"humidity\":0.67,\"windSpeed\":1.03,\"windGust\":2.57,\"windBearing\":101,\"visibility\":16.09,\"cloudCover\":0,\"pressure\":1012.96,\"ozone\":337.58,\"uvIndex\":0},{\"time\":1501023600,\"summary\":\"Clear\",\"icon\":\"clear-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":17.71,\"apparentTemperature\":17.71,\"dewPoint\":12.12,\"humidity\":0.7,\"windSpeed\":1.29,\"windGust\":2.49,\"windBearing\":127,\"visibility\":16.09,\"cloudCover\":0,\"pressure\":1012.67,\"ozone\":332.32,\"uvIndex\":0},{\"time\":1501027200,\"summary\":\"Clear\",\"icon\":\"clear-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":17.18,\"apparentTemperature\":17.18,\"dewPoint\":12.11,\"humidity\":0.72,\"windSpeed\":1.57,\"windGust\":2.53,\"windBearing\":149,\"visibility\":16.09,\"cloudCover\":0,\"pressure\":1012.36,\"ozone\":327.74,\"uvIndex\":0},{\"time\":1501030800,\"summary\":\"Clear\",\"icon\":\"clear-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":16.67,\"apparentTemperature\":16.67,\"dewPoint\":11.99,\"humidity\":0.74,\"windSpeed\":1.86,\"windGust\":2.76,\"windBearing\":167,\"visibility\":16.09,\"cloudCover\":0.21,\"pressure\":1012.02,\"ozone\":324.77,\"uvIndex\":0},{\"time\":1501034400,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":16.28,\"apparentTemperature\":16.28,\"dewPoint\":11.84,\"humidity\":0.75,\"windSpeed\":2.17,\"windGust\":3.13,\"windBearing\":182,\"visibility\":16.09,\"cloudCover\":0.49,\"pressure\":1011.67,\"ozone\":322.45,\"uvIndex\":0},{\"time\":1501038000,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":16.03,\"apparentTemperature\":16.03,\"dewPoint\":11.86,\"humidity\":0.76,\"windSpeed\":2.44,\"windGust\":3.52,\"windBearing\":191,\"visibility\":15,\"cloudCover\":0.7,\"pressure\":1011.3,\"ozone\":320.23,\"uvIndex\":0},{\"time\":1501041600,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":15.88,\"apparentTemperature\":15.88,\"dewPoint\":12.15,\"humidity\":0.79,\"windSpeed\":2.58,\"windGust\":3.91,\"windBearing\":197,\"visibility\":15,\"cloudCover\":0.73,\"pressure\":1010.93,\"ozone\":317.78,\"uvIndex\":0},{\"time\":1501045200,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":16.02,\"apparentTemperature\":16.02,\"dewPoint\":12.61,\"humidity\":0.8,\"windSpeed\":2.68,\"windGust\":4.32,\"windBearing\":198,\"visibility\":15,\"cloudCover\":0.68,\"pressure\":1010.54,\"ozone\":315.38,\"uvIndex\":0},{\"time\":1501048800,\"summary\":\"Mostly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":16.63,\"apparentTemperature\":16.63,\"dewPoint\":13.1,\"humidity\":0.8,\"windSpeed\":2.91,\"windGust\":4.74,\"windBearing\":198,\"visibility\":15,\"cloudCover\":0.63,\"pressure\":1010.17,\"ozone\":313.32,\"uvIndex\":0},{\"time\":1501052400,\"summary\":\"Partly Cloudy\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0508,\"precipProbability\":0.01,\"precipType\":\"rain\",\"temperature\":18.45,\"apparentTemperature\":18.45,\"dewPoint\":13.59,\"humidity\":0.73,\"windSpeed\":3.4,\"windGust\":5.15,\"windBearing\":201,\"visibility\":15,\"cloudCover\":0.59,\"pressure\":1009.84,\"ozone\":311.69,\"uvIndex\":1},{\"time\":1501056000,\"summary\":\"Drizzle\",\"icon\":\"rain\",\"precipIntensity\":0.2057,\"precipProbability\":0.08,\"precipType\":\"rain\",\"temperature\":20.46,\"apparentTemperature\":20.46,\"dewPoint\":14.08,\"humidity\":0.67,\"windSpeed\":4.01,\"windGust\":5.56,\"windBearing\":203,\"visibility\":15,\"cloudCover\":0.54,\"pressure\":1009.5,\"ozone\":310.36,\"uvIndex\":1},{\"time\":1501059600,\"summary\":\"Light Rain\",\"icon\":\"rain\",\"precipIntensity\":0.3581,\"precipProbability\":0.12,\"precipType\":\"rain\",\"temperature\":21.83,\"apparentTemperature\":21.83,\"dewPoint\":14.51,\"humidity\":0.63,\"windSpeed\":4.56,\"windGust\":6.09,\"windBearing\":205,\"visibility\":15,\"cloudCover\":0.54,\"pressure\":1009.11,\"ozone\":309.35,\"uvIndex\":2},{\"time\":1501063200,\"summary\":\"Light Rain\",\"icon\":\"rain\",\"precipIntensity\":0.32,\"precipProbability\":0.12,\"precipType\":\"rain\",\"temperature\":21.56,\"apparentTemperature\":21.56,\"dewPoint\":14.88,\"humidity\":0.66,\"windSpeed\":5.02,\"windGust\":6.87,\"windBearing\":206,\"visibility\":12.33,\"cloudCover\":0.59,\"pressure\":1008.59,\"ozone\":308.33,\"uvIndex\":3},{\"time\":1501066800,\"summary\":\"Drizzle\",\"icon\":\"rain\",\"precipIntensity\":0.2159,\"precipProbability\":0.1,\"precipType\":\"rain\",\"temperature\":20.51,\"apparentTemperature\":20.51,\"dewPoint\":15.22,\"humidity\":0.72,\"windSpeed\":5.39,\"windGust\":7.74,\"windBearing\":206,\"visibility\":9.67,\"cloudCover\":0.68,\"pressure\":1008.03,\"ozone\":307.47,\"uvIndex\":4},{\"time\":1501070400,\"summary\":\"Drizzle\",\"icon\":\"rain\",\"precipIntensity\":0.1854,\"precipProbability\":0.1,\"precipType\":\"rain\",\"temperature\":19.34,\"apparentTemperature\":19.38,\"dewPoint\":15.49,\"humidity\":0.78,\"windSpeed\":5.61,\"windGust\":8.42,\"windBearing\":208,\"visibility\":7,\"cloudCover\":0.77,\"pressure\":1007.48,\"ozone\":307.83,\"uvIndex\":4},{\"time\":1501074000,\"summary\":\"Light Rain\",\"icon\":\"rain\",\"precipIntensity\":0.2921,\"precipProbability\":0.22,\"precipType\":\"rain\",\"temperature\":18.73,\"apparentTemperature\":18.82,\"dewPoint\":15.72,\"humidity\":0.83,\"windSpeed\":5.66,\"windGust\":8.69,\"windBearing\":213,\"visibility\":9.56,\"cloudCover\":0.85,\"pressure\":1007.01,\"ozone\":310.24,\"uvIndex\":4},{\"time\":1501077600,\"summary\":\"Light Rain\",\"icon\":\"rain\",\"precipIntensity\":0.5004,\"precipProbability\":0.37,\"precipType\":\"rain\",\"temperature\":18.2,\"apparentTemperature\":18.33,\"dewPoint\":15.89,\"humidity\":0.86,\"windSpeed\":5.63,\"windGust\":8.76,\"windBearing\":217,\"visibility\":12.12,\"cloudCover\":0.93,\"pressure\":1006.56,\"ozone\":313.74,\"uvIndex\":3},{\"time\":1501081200,\"summary\":\"Light Rain\",\"icon\":\"rain\",\"precipIntensity\":0.5994,\"precipProbability\":0.45,\"precipType\":\"rain\",\"temperature\":18.15,\"apparentTemperature\":18.3,\"dewPoint\":16.02,\"humidity\":0.87,\"windSpeed\":5.62,\"windGust\":8.96,\"windBearing\":222,\"visibility\":14.66,\"cloudCover\":0.98,\"pressure\":1006.14,\"ozone\":316.48,\"uvIndex\":2},{\"time\":1501084800,\"summary\":\"Light Rain\",\"icon\":\"rain\",\"precipIntensity\":0.3988,\"precipProbability\":0.37,\"precipType\":\"rain\",\"temperature\":18.61,\"apparentTemperature\":18.77,\"dewPoint\":16.19,\"humidity\":0.86,\"windSpeed\":5.67,\"windGust\":9.57,\"windBearing\":225,\"visibility\":14.77,\"cloudCover\":0.99,\"pressure\":1005.66,\"ozone\":317.69,\"uvIndex\":1},{\"time\":1501088400,\"summary\":\"Drizzle\",\"icon\":\"rain\",\"precipIntensity\":0.1549,\"precipProbability\":0.14,\"precipType\":\"rain\",\"temperature\":19.29,\"apparentTemperature\":19.45,\"dewPoint\":16.33,\"humidity\":0.83,\"windSpeed\":5.73,\"windGust\":10.28,\"windBearing\":227,\"visibility\":14.89,\"cloudCover\":0.99,\"pressure\":1005.21,\"ozone\":318.06,\"uvIndex\":1},{\"time\":1501092000,\"summary\":\"Overcast\",\"icon\":\"cloudy\",\"precipIntensity\":0.0483,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":19.51,\"apparentTemperature\":19.64,\"dewPoint\":16.23,\"humidity\":0.81,\"windSpeed\":5.69,\"windGust\":10.65,\"windBearing\":231,\"visibility\":15,\"cloudCover\":0.98,\"pressure\":1004.99,\"ozone\":318.01,\"uvIndex\":0}]},\"daily\":{\"summary\":\"Light rain on Wednesday through Sunday, with temperatures rising to 24Â°C tomorrow.\",\"icon\":\"rain\",\"data\":[{\"time\":1500850800,\"summary\":\"Mostly cloudy throughout the day.\",\"icon\":\"partly-cloudy-day\",\"sunriseTime\":1500869570,\"sunsetTime\":1500926485,\"moonPhase\":0.04,\"precipIntensity\":0.0279,\"precipIntensityMax\":0.0813,\"precipIntensityMaxTime\":1500886800,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperatureMin\":14.67,\"temperatureMinTime\":1500858000,\"temperatureMax\":19.98,\"temperatureMaxTime\":1500919200,\"apparentTemperatureMin\":14.67,\"apparentTemperatureMinTime\":1500858000,\"apparentTemperatureMax\":19.98,\"apparentTemperatureMaxTime\":1500919200,\"dewPoint\":11.99,\"humidity\":0.75,\"windSpeed\":4.65,\"windGust\":10.67,\"windGustTime\":1500894000,\"windBearing\":329,\"visibility\":13.95,\"cloudCover\":0.77,\"pressure\":1013.17,\"ozone\":348.74,\"uvIndex\":4,\"uvIndexTime\":1500897600},{\"time\":1500937200,\"summary\":\"Partly cloudy until evening.\",\"icon\":\"partly-cloudy-day\",\"sunriseTime\":1500956055,\"sunsetTime\":1501012803,\"moonPhase\":0.08,\"precipIntensity\":0,\"precipIntensityMax\":0,\"precipProbability\":0,\"temperatureMin\":14.02,\"temperatureMinTime\":1500958800,\"temperatureMax\":24.32,\"temperatureMaxTime\":1500998400,\"apparentTemperatureMin\":14.02,\"apparentTemperatureMinTime\":1500958800,\"apparentTemperatureMax\":24.32,\"apparentTemperatureMaxTime\":1500998400,\"dewPoint\":11.8,\"humidity\":0.66,\"windSpeed\":2.93,\"windGust\":9.71,\"windGustTime\":1500937200,\"windBearing\":335,\"visibility\":16.09,\"cloudCover\":0.47,\"pressure\":1015.14,\"ozone\":340.55,\"uvIndex\":5,\"uvIndexTime\":1500980400},{\"time\":1501023600,\"summary\":\"Light rain until evening.\",\"icon\":\"rain\",\"sunriseTime\":1501042540,\"sunsetTime\":1501099119,\"moonPhase\":0.11,\"precipIntensity\":0.1448,\"precipIntensityMax\":0.5994,\"precipIntensityMaxTime\":1501081200,\"precipProbability\":0.45,\"precipType\":\"rain\",\"temperatureMin\":15.88,\"temperatureMinTime\":1501041600,\"temperatureMax\":21.83,\"temperatureMaxTime\":1501059600,\"apparentTemperatureMin\":15.88,\"apparentTemperatureMinTime\":1501041600,\"apparentTemperatureMax\":21.83,\"apparentTemperatureMaxTime\":1501059600,\"dewPoint\":14.19,\"humidity\":0.77,\"windSpeed\":3.84,\"windGust\":10.65,\"windGustTime\":1501092000,\"windBearing\":215,\"visibility\":16.09,\"cloudCover\":0.7,\"pressure\":1008.45,\"ozone\":316.21,\"uvIndex\":4,\"uvIndexTime\":1501066800},{\"time\":1501110000,\"summary\":\"Light rain starting in the afternoon, continuing until evening.\",\"icon\":\"rain\",\"sunriseTime\":1501129027,\"sunsetTime\":1501185432,\"moonPhase\":0.15,\"precipIntensity\":0.0635,\"precipIntensityMax\":0.3962,\"precipIntensityMaxTime\":1501178400,\"precipProbability\":0.15,\"precipType\":\"rain\",\"temperatureMin\":13.81,\"temperatureMinTime\":1501131600,\"temperatureMax\":21.42,\"temperatureMaxTime\":1501156800,\"apparentTemperatureMin\":13.81,\"apparentTemperatureMinTime\":1501131600,\"apparentTemperatureMax\":21.42,\"apparentTemperatureMaxTime\":1501156800,\"dewPoint\":11.16,\"humidity\":0.69,\"windSpeed\":4.85,\"windGust\":8.6,\"windGustTime\":1501178400,\"windBearing\":246,\"visibility\":16.09,\"cloudCover\":0.74,\"pressure\":1006.05,\"ozone\":322.95,\"uvIndex\":4,\"uvIndexTime\":1501156800},{\"time\":1501196400,\"summary\":\"Mostly cloudy throughout the day.\",\"icon\":\"partly-cloudy-day\",\"sunriseTime\":1501215514,\"sunsetTime\":1501271744,\"moonPhase\":0.18,\"precipIntensity\":0.0152,\"precipIntensityMax\":0.0686,\"precipIntensityMaxTime\":1501225200,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperatureMin\":13.13,\"temperatureMinTime\":1501218000,\"temperatureMax\":21.53,\"temperatureMaxTime\":1501254000,\"apparentTemperatureMin\":13.13,\"apparentTemperatureMinTime\":1501218000,\"apparentTemperatureMax\":21.53,\"apparentTemperatureMaxTime\":1501254000,\"dewPoint\":10.07,\"humidity\":0.64,\"windSpeed\":5.17,\"windGust\":8.74,\"windGustTime\":1501203600,\"windBearing\":249,\"visibility\":16.09,\"cloudCover\":0.43,\"pressure\":1010.95,\"ozone\":318.97,\"uvIndex\":5,\"uvIndexTime\":1501239600},{\"time\":1501282800,\"summary\":\"Light rain in the morning and overnight.\",\"icon\":\"rain\",\"sunriseTime\":1501302003,\"sunsetTime\":1501358054,\"moonPhase\":0.21,\"precipIntensity\":0.0686,\"precipIntensityMax\":0.2743,\"precipIntensityMaxTime\":1501308000,\"precipProbability\":0.12,\"precipType\":\"rain\",\"temperatureMin\":16.42,\"temperatureMinTime\":1501286400,\"temperatureMax\":23.11,\"temperatureMaxTime\":1501333200,\"apparentTemperatureMin\":16.42,\"apparentTemperatureMinTime\":1501286400,\"apparentTemperatureMax\":23.11,\"apparentTemperatureMaxTime\":1501333200,\"dewPoint\":13.31,\"humidity\":0.69,\"windSpeed\":5.79,\"windGust\":11.05,\"windGustTime\":1501354800,\"windBearing\":212,\"visibility\":16.09,\"cloudCover\":0.56,\"pressure\":1012.01,\"ozone\":306.62,\"uvIndex\":6,\"uvIndexTime\":1501329600},{\"time\":1501369200,\"summary\":\"Light rain in the morning.\",\"icon\":\"rain\",\"sunriseTime\":1501388492,\"sunsetTime\":1501444362,\"moonPhase\":0.24,\"precipIntensity\":0.1067,\"precipIntensityMax\":0.4521,\"precipIntensityMaxTime\":1501394400,\"precipProbability\":0.36,\"precipType\":\"rain\",\"temperatureMin\":16.88,\"temperatureMinTime\":1501394400,\"temperatureMax\":22.26,\"temperatureMaxTime\":1501426800,\"apparentTemperatureMin\":16.91,\"apparentTemperatureMinTime\":1501394400,\"apparentTemperatureMax\":22.26,\"apparentTemperatureMaxTime\":1501426800,\"dewPoint\":14.24,\"humidity\":0.73,\"windSpeed\":4.22,\"windGust\":10.59,\"windGustTime\":1501369200,\"windBearing\":220,\"cloudCover\":0.99,\"pressure\":1010.56,\"ozone\":321.39,\"uvIndex\":4,\"uvIndexTime\":1501416000},{\"time\":1501455600,\"summary\":\"Mostly cloudy starting in the afternoon.\",\"icon\":\"partly-cloudy-day\",\"sunriseTime\":1501474982,\"sunsetTime\":1501530667,\"moonPhase\":0.28,\"precipIntensity\":0.0102,\"precipIntensityMax\":0.0787,\"precipIntensityMaxTime\":1501538400,\"precipProbability\":0.06,\"precipType\":\"rain\",\"temperatureMin\":15.16,\"temperatureMinTime\":1501480800,\"temperatureMax\":22.22,\"temperatureMaxTime\":1501506000,\"apparentTemperatureMin\":15.16,\"apparentTemperatureMinTime\":1501480800,\"apparentTemperatureMax\":22.22,\"apparentTemperatureMaxTime\":1501506000,\"dewPoint\":11.67,\"humidity\":0.66,\"windSpeed\":4.31,\"windGust\":10.44,\"windGustTime\":1501538400,\"windBearing\":221,\"cloudCover\":0.39,\"pressure\":1012.24,\"ozone\":341.2,\"uvIndex\":6,\"uvIndexTime\":1501502400}]},\"flags\":{\"sources\":[\"datapoint\",\"isd\",\"nearest-precip\",\"metwarn\",\"cmc\",\"gfs\",\"madis\",\"darksky\"],\"datapoint-stations\":[\"uk-324164\",\"uk-324382\",\"uk-350286\",\"uk-350413\",\"uk-350868\",\"uk-351142\",\"uk-351167\",\"uk-351683\",\"uk-351996\",\"uk-352533\",\"uk-353233\",\"uk-354137\",\"uk-354312\",\"uk-354378\",\"uk-5\",\"uk-99203\"],\"isd-stations\":[\"036720-99999\",\"036911-99999\",\"036913-99999\",\"037663-99999\",\"037683-99999\",\"037700-99999\",\"037720-99999\",\"037750-99999\",\"037780-99999\",\"037790-99999\",\"037810-99999\",\"037820-99999\",\"037830-99999\",\"037840-99999\",\"037860-99999\",\"037900-99999\"],\"units\":\"si\"}}",
				WeatherResponse.class
		);
	}

	public Single<WeatherResponse> fetchWeather(Request request) {
		EspressoIdlingResource.getInstance().increment();
		return Single.just(response)
				.delay(delay, TimeUnit.MILLISECONDS)
				.subscribeOn(Schedulers.computation())
				.observeOn(AndroidSchedulers.mainThread())
				.doFinally(() -> EspressoIdlingResource.getInstance().decrement());
	}

	@VisibleForTesting
	public void setDelay(int delay) {
		this.delay = delay;
	}
}
